---
import WidgetWrapper from '~/components/ui/WidgetWrapper.astro';
import type { Card } from '~/types';

interface Props {
  title: string;
  description?: string;
  content: Card[];
  columns?: number;
  isAfterContent?: boolean;
  id?: string;
  isDark?: boolean;
  classes?: Record<string, string>;
  containerClasses?: string;
}

const {
  title,
  content,
  columns = 3,
  isAfterContent = false,

  id,
  isDark = false,
  classes = {},
  containerClasses,
} = Astro.props as Props;
---

<div class={`${containerClasses ?? ''}`}>
  <WidgetWrapper
    id={id}
    isDark={isDark}
    containerClass={`max-w-7xl mx-auto ${isAfterContent ? 'pt-0 md:pt-0 lg:pt-0' : ''} ${classes?.container ?? ''}`}
  >
    <h2 class="font-bold
  font-heading
  leading-tighter
  tracking-tighter
  text-heading
  md:text-4xl
  text-3xl
  mb-12">
      {title}
    </h2>

    <div class="mx-auto max-w-7xl">
      {
        Array.isArray(content) ? (
          <div class={`grid grid-cols-1 md:grid-cols-${columns} gap-8`}>
            {content.map((item) => (
              <div class="col-span-1 flex flex-col h-full overflow-hidden">
                <div class="aspect-[16/9] w-full overflow-hidden rounded-lg">
                  <img src={item.image.src} alt={item.image.alt || ''} class="w-full h-full object-cover" />
                </div>
                <div class="flex flex-col flex-grow">
                  <h3 class="font-semibold font-heading text-heading md:text-2xl text-xl mt-4 mb-2">{item.title}</h3>
                  <p class="text-sm text-muted flex-grow">{item.description}</p>
                  {item.cta && (
                    <a href={item.cta.href} class="mt-4 inline-block text-primary hover:underline">
                      {item.cta.text}
                    </a>
                  )}
                </div>
              </div>
            ))}
          </div>
        ) : (
          <div>Error: Content must be an array</div>
        )
      }
    </div>
  </WidgetWrapper>
</div>
