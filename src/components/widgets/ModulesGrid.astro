---
import type { ModuleCard as ModuleProps } from '~/types';
import Headline from '~/components/ui/Headline.astro';
import WidgetWrapper from '~/components/ui/WidgetWrapper.astro';
import ModuleCard from '~/components/common/ModuleCard.astro';

export interface Props {
  title?: string;
  subtitle?: string;
  tagline?: string;
  modules: Array<ModuleProps>;
  columns?: number;
  id?: string;
  isDark?: boolean;
  classes?: Record<string, string>;
  bg?: string;
}

const {
  title = await Astro.slots.render('title'),
  subtitle = await Astro.slots.render('subtitle'),
  tagline = await Astro.slots.render('tagline'),
  modules = [],
  id,
  isDark = false,
  classes = {},
  bg = await Astro.slots.render('bg'),
} = Astro.props;
---

<WidgetWrapper id={id} isDark={isDark} containerClass={`max-w-7xl mx-auto ${classes?.container ?? ''}`} bg={bg}>
  <!-- Titolo e sottotitolo -->
  {
    (title || subtitle || tagline) && (
      <div class="mb-8 text-center md:mb-12">
        <Headline
          title={title}
          subtitle={subtitle}
          tagline={tagline}
          classes={{
            container: 'max-w-3xl mx-auto',
            title: 'text-3xl font-bold tracking-tighter sm:text-4xl md:text-5xl font-heading',
            subtitle: 'text-xl text-muted dark:text-slate-400',
          }}
        />
      </div>
    )
  }

  <!-- Griglia di moduli - layout responsive -->
  <div class="grid grid-cols-1 gap-6 md:grid-cols-2 md:gap-8">
    {
      modules.map((module) => (
        <ModuleCard
          title={module.title}
          description={module.description}
          icon={module.icon}
          iconImage={module.iconImage}
          features={module.features}
          callToAction={module.callToAction}
        />
      ))
    }
  </div>
</WidgetWrapper>
