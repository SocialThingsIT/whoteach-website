---
// filepath: c:\Users\citru\Documents\GitHub\whoteach-website\src\pages\[...lang]\about.astro
import Headline from '~/components/ui/Headline.astro';
import Layout from '~/layouts/PageLayout.astro';
import Form from '~/components/ui/Form.astro';

// i18n helpers
import { t } from '~/utils/i18n';
import type { Lang } from '~/utils/i18n';
import { link } from '~/utils/routes';
import UsersManager from '~/components/custom-react/UsersManger';
import ProtectedRoute from '~/components/custom-react/dashboard/ProtectedRoute';

/**
 * Generate one static page per language
 */
export async function getStaticPaths() {
  const langs: Lang[] = ['it', 'en'];
  return langs.map((lang) => ({ params: { lang } }));
}

/**
 * Current locale comes from the dynamic segment [lang]
 */
const { lang } = Astro.params as { lang: Lang };

/**
 * Localised metadata
 */
const metadata = {
  title: t(lang, 'about.title'),
};
---

<Layout metadata={metadata}>
  <div
    class="intersect-once intercept-no-queue intersect-quarter relative mx-auto mb-12 mt-6 flex max-w-7xl flex-col px-4 sm:px-6 md:mb-16 motion-safe:md:opacity-0 motion-safe:md:intersect:animate-fade lg:mb-20"
  >
    <Headline
      title={t(lang, 'Dashboard')}
      classes={{
        title: 'text-3xl md:text-4xl font-bold tracking-tighter mb-4 font-heading text-primary',
        subtitle: 'max-w-3xl text-xl text-muted dark:text-slate-400',
      }}
    />

    <section class="mx-auto max-w-6xl px-4 py-10">
      <div>
        <ProtectedRoute client:only="react" requiredRole="admin">
          <h1 class="mb-6 text-3xl font-bold">Gestione Utenti</h1>
          <UsersManager client:only="react" />
        </ProtectedRoute>
      </div>
    </section>
  </div>
</Layout>
