---
// filepath: c:\Users\citru\Documents\GitHub\whoteach-website\src\pages\[...lang]\about.astro
import Headline from '~/components/ui/Headline.astro';
import Layout from '~/layouts/PageLayout.astro';

// i18n helpers
import { t } from '~/utils/i18n';
import type { Lang } from '~/utils/i18n';
import { link } from '~/utils/routes';
import AuthSwitch from '~/components/custom-react/dashboard/AuthSwitch';

/**
 * Generate one static page per language
 */
export async function getStaticPaths() {
  const langs: Lang[] = ['it', 'en'];
  return langs.map((lang) => ({ params: { lang } }));
}

/**
 * Current locale comes from the dynamic segment [lang]
 */
const { lang } = Astro.params as { lang: Lang };

/**
 * Localised metadata
 */
const metadata = {
  title: t(lang, 'about.title'),
};
---

<Layout metadata={metadata}>
  <div
    class="intersect-once intercept-no-queue intersect-quarter mx-auto mb-12 mt-24 flex w-96 flex-col items-center md:mb-16 motion-safe:md:opacity-0 motion-safe:md:intersect:animate-fade lg:mb-20"
  >
    <Headline
      title={t(lang, 'dashboard.form.title')}
      textAlign="center"
      classes={{
        title: 'text-3xl md:text-4xl font-bold tracking-tighter mb-4 font-heading text-primary',
        subtitle: 'max-w-3xl text-xl text-muted dark:text-slate-400',
      }}
    />

    <div class="w-full">
      <AuthSwitch
        client:only="react"
        initialMode="login"
        redirectTo={link(lang, 'dashboard')}
        labels={{
          email: t(lang, 'dashboard.form.email') || 'Email',
          password: t(lang, 'dashboard.form.password') || 'Password',
          submitLogin: t(lang, 'dashboard.form.loginTab') || 'Accedi',
          submitSignup: t(lang, 'dashboard.form.signupTab') || 'Registrati',
          tabLogin: t(lang, 'dashboard.form.loginTab') || 'Accedi',
          tabSignup: t(lang, 'dashboard.form.signupTab') || 'Registrati',
        }}
      />
    </div>
  </div>
</Layout>
